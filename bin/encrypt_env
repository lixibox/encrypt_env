#!/usr/bin/env ruby

# frozen_string_literal: true

require 'encrypt_env'

argv = ARGV
action = argv.shift

if action == 'setup'
  EncryptEnv.setup
  exit 0
elsif action == 'show'
  if argv[0]
    EncryptEnv.show(argv[0])
  else
    EncryptEnv.show
  end
  exit 0
elsif action == 'all'
  EncryptEnv.show('all')
  exit 0
elsif action == 'edit'
  if argv[0]
    EncryptEnv.edit(argv[0])
  else
    EncryptEnv.edit
  end
  exit 0
elsif ['help', '--help', '-h'].include?(action)
  puts <<~HELP
    Usage:
      encrypt_env setup
      encrypt_env secrets
      encrypt_env secrets_all
      encrypt_env edit
  HELP

  exit 0
else
  puts "Unknown action: #{action}"
  exit 1
end
